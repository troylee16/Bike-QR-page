<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bike QR Code</title>

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MRBCP67S');</script>
    <!-- End Google Tag Manager -->
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MRBCP67S"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <h2>If you found this bike, please contact:</h2>
    <p><strong>Name:</strong> Ricardo Macedo Ferreira Pinto</p>
    <p><strong>Phone Number:</strong> 913982535</p>
    <p><strong>Emergency Contact:</strong> 912872629</p>
    <p><strong>Email:</strong> <a href="mailto:pinto108@gmail.com">pinto108@gmail.com</a></p>

<script>
  // Fetch the user's IP address and location data from ipinfo.io
  fetch('https://ipinfo.io/json')
    .then(response => response.json())  // Parse the response as JSON
    .then(data => {
      // Send the data to your Zapier Webhook
      fetch("https://hooks.zapier.com/hooks/catch/21555527/2f70so4/", {
        method: "POST",
        headers: { 
          "Content-Type": "application/json"  // Specify that we're sending JSON
        },
        body: JSON.stringify({
          ip: data.ip,                  // User's IP address
          city: data.city,              // City from ipinfo.io
          region: data.region,          // Region (state or province)
          country: data.country,        // Country code
          location: data.loc,           // Latitude and Longitude (separated by a comma)
          timestamp: new Date().toISOString()  // Include the timestamp for when the scan occurred
        })
      })
      .then(response => response.json())  // Optionally handle the response from Zapier
      .then(responseData => {
        console.log('Data sent successfully:', responseData);
      })
      .catch(error => {
        console.error('Error sending data to Zapier:', error);
      });
    })
    .catch(error => {
      console.error("Error fetching location:", error);  // Handle errors from ipinfo.io
    });
</script>

</body>
    


</html>
